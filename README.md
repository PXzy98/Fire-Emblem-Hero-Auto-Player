# Fire-Emblem-Hero-Auto-Player
This FEH open helper is a game helper based on python image recognition. It includes two major functions, an auto wishes helper and main story passer. And it comes with an ugly interface for the detailed settings.
Since FEH is a mobile game, you need to select an emulator wisely. In my test environment, i set up a LDPlayer (Andriod 9) and a MuMu Player 12(Andriod 12) in 540P for testing.

Warning! The author is not liable for any direct or indirect losses caused by the use of this project or the inability to use it. This includes, but is not limited to, loss of gems, account bann.

If you find any question while using, welcome to ask me for help

## Folder structure

- **/logs**: Holds log files generated by the project during runtime. 
- **/finished_wishes**: Records the history of past wishes with screenshots.
- **/config**: Holds configuration files or settings used in the project.(would be created when the program started)
  - **/config/config_loot.ini** Stores the settings for loot help
  - **/config/config_passer.ini** Stores the settings for story passer
- **/pics**: This folder holds the necessary templates for image recognition
  - **/pics/first_level**: Contains the templates for main menu. Since the icon is animated, so you can add different exclamation marks and corner of the icon in the folder for better recognition. 
  - **/pics/second_level**: Contains the templates for second menu, and the same with above one. *Detailed usage would be explained below.*
  - **/pics/loot**: Contains the templates for loot helper
    - **/pics/loot/colors/**: Groups the templates with different colors
      - **/pics/loot/colors/blue_with_pos**
      - **/pics/loot/colors/blue_hide_with_pos**
      - **/pics/loot/colors/green_with_pos**
      - **/pics/loot/colors/green_hide_with_pos**
      - **/pics/loot/colors/red_with_pos**
      - **/pics/loot/colors/red_hide_with_pos**
      - **/pics/loot/colors/white_with_pos**
      - **/pics/loot/colors/white_hide_with_pos**
  - **/pics/aftergame_close.png**
  - **/pics/auto_confirm.png**
  - **/pics/auto_ingame.png**
  - **/pics/backward.png**
  - **/pics/give_up.png**
  - **/pics/haschamp.png**
  - **/pics/main_ticked.png**
  - **/pics/over.png**
  - **/pics/refill.png**
  - **/pics/second_ticked.png**
  - **/pics/skip.png**
  - **/pics/ship_green.png**
  - **/pics/stage_clear.png**
  - **/pics/stage_clear_part.png**
  - **/pics/start_fight.png**
  - **/pics/start_fight_ingame.png**


## Requirements

- pip install pygetwindow
- pip install opencv-python
- pip install pyautogui
- pip install numpy
- pip install scikit-image
- pip install tkinter
- pip install configparser

## How to use it

> Firstly, you need to take screenshots of the major buttons and icons as templates, they are listed in the "Folder structure" part above. I will provide the templates i used for testing in the sample_pics folder, but they may not be useful even if the settings for emulators are the same with me, due to the slightly difference in the interface(some emulator count the sidebar within the resolution and some are not). I strongly suggest to take screenshot by your own and **keep in mind that once if you change the quality of the resources in game**, the previous templates may not work as well.

> Secondly, you need to turn off necessary settings in environment settings. For example, the animations.
![ingame settings](sample_pictures/e_settings.png)

---

> After these, you can start to configuration to run the program.

---

![ingame settings](sample_pictures/main_menu_1.png)
> For main story passer, you need to enter the window name depends on the emulator you are using, it doesn't need to be the completed name of the window, you can use the keyword for doing this, but it may consider other window as the emulator for inacurate keywords.
> For the template_path, it was once designed to be the absolute path for the template folder, but i was to lazy to change. So, the template folder is right now fixed to be the under same folder with the code / executable file. But you can use different suffixes for the program to take into different folders for differemt tasks. For example, the default folder is /pics/first_level, and you need to running this for hard difficulty, you may take the screenshots again as templates, and create a /pics/first_level_hard folder to store these. Then you only need to add "_hard" to the template_name entry. Remember, changing this setting does not change the recognition of the buttons, so if you want to change the resolution of the emulator, you need to manully replace the templates under pics folder.
> The slider for threshold is represents the tolerance of how similar the button image in the emulator compares to the template, you can ajust the value based on the running situation.
> The radio buttons below decides the algorithm to check the templates in main and second level menu, the second option would actively reduce the matching results with tick icon, and the first option would not. So the first option may cause the program accidentally select the passed level in game with low threshold, and the second would not recognize the icons correctly with high threshold. Please test and take a suitable threshold in your own environment.
> The last two options give user the ability toi ajust where would the program click on after it gets the cordinates of recognized template. As the image recogniction method may give the coordinates with slightly offset, such as located at the top left corner and the buttons would not be correctly clicked, you can add some offset to correct this.

> After all, you can start to use the tool. you should go to the menu listed below.

![ingame settings](sample_pictures/first_level.png)

> It will go through a whole story directly. But you stil need to change to another story manully, as i dont think it would be needed to pass all the story at once. By the way, you need to make sure your team gets strong enough, it will terminate if defeated.

---

For wish helper,
